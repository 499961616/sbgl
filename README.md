ThinkCMF企业门户解决方案
===========
帮助你更快地搭建企业门户网站

### 开发手册
http://www.kancloud.cn/thinkcmf/doc5_1  
https://www.kancloud.cn/thinkcmf/theme_tutorial

### Git仓库

1. GitHub:https://github.com/thinkcmf/portal 主要仓库
2. 码云:https://gitee.com/thinkcmf/portal 国内仓库

### 环境推荐
> php7.1

> mysql 5.6+

> 打开rewrite


### 最低环境要求
> php5.6+

> mysql 5.5+ (mysql5.1安装时选择utf8编码，不支持表情符)

> 打开rewrite



# 数据库
  ###  主要数据库表

- cmf_equpment 主机设备表
- cmf_precious_qupment  精密仪器表
- cmf_bdk  变动库表
- cmf_dw  学校单位表
- cmf_mk  名库表
- cmf_yrk  学校单位老师库
- cmf_sbmk  设备名库表




# 模块功能

  * 1.主机管理  
  * 2.精密仪器管理 
  * 3.数据变动管理  
   * 4.单位/领用人管理   

## 1.主机管理 功能介绍
---
#### 分为主机管理和单位主机管理


*  **主机管理**

    - 这个功能是给设备管理员使用，用来对设备进行增改查。二级管理员没有权限访问这个模块。


*  **单位主机管理**

   - 这个功能是给二级单位管理员使用，没有权限增删改。只能筛选出本单位的设备进行查看和excel导出。




## 2.精密仪器管理 功能介绍
---
- 本功能是用来给每年学校上报精密设备填写的模块。
- 默认是当年的时间范围 会筛选出本校所有大于四十万的设备，并自动插入精密仪器表中。
- 筛选出的设备可以填写当年使用情况 并保存到精密表中。
- 管理员才有的权限功能，二级单位管理员没有访问权限。
        


## 3.数据变动管理 功能介绍
---
### 分为单条变动、批量变动、变动恢复

*  **单条变动**

     - 对主机设备进行变动修改，也是管理员才有的权限，对比主机管理模块的修改功能，它的主要功能是现状修改和价格变动，
     - 现状变动选项如果是 567d，则设备数据新增到变动表中 并且在主机设备表中删除 如果是C 转出 则设备表中的状态改为B 变动表为C。
     - 价格变动 如果价格和现状 567d 没有变动  则设备表更新数据并且变动表中国呢插入价格变动记录。
     - 如果现状变动和价格变动同时修改，则先在变动库中 插入现状变动数据 在插入价格变动数据。



*  **批量变动**

     - 批量变动和单挑变动逻辑一样，只是增加了筛选需要进行批量变动的设备功能，在进行变动。



*  **变动恢复**

     - 变动恢复 主要是对设备变动进行恢复，只能恢复本学年的设备，其他学年不能恢复。
     - __价格恢复功能:__ 想要恢复价格,则主机设备表中要有这条设备记录才可以进行价格变动恢复，如果该设备不在主机设备表中则无法恢复。
     __恢复流程->主机设备库单价还原 -> 变动库删除此次的变动记录__。
     - __单位现状变动恢复功能:__ 如果变动恢复状态为567 D   则直接恢复到设备库中 并且变动库中该条记录删除。 如果状态是C恢复，则将该条记录中主机设备中的现状改为**1.在用** 状态，并且将转入单位恢复成原来的转入单位。删除变动库中该条记录删除
     


##  4.单位/领用人管理  功能介绍
---
### 分为单位人管理、领用人管理

*   **单位人管理**
 
     - 对学校的单位进行管理

*   **领用人管理**

     - 对每个单位所对应的老师进行管理

##  5.权限管理  功能介绍
---
### 分为超级管理员管理、设备管理员、单位二级管理员

*   **超级管理员管理**
 
     - 网站最高级别，所有权限     帐号：llf    密码：qqqwww

*   **设备管理员**

     - 可以新增二级管理员，二级单位帐号名字必须是单位号，可以对设备的所有权限进行管理  帐号：sys  密码：qqqwww

*   **单位二级管理员**

     - 只能查看本单位的设备，并且进行打印          帐号：240102  密码：qqqwww 